


str字幕格.md

本文主要讲解srt字幕文件的加载和格式解析，使用c++解析srt为我们需要的表达形式和格式。

1、srt格式文件为视频字幕文件，其格式为：

数字
时间 --> 时间
字幕内容（可以多行）
空行
数字
时间 --> 时间
字幕内容（可以多行）
空行

SRT字幕

今天无意间发现了这篇文章，里面写了一些手动字幕制作方法，可以留着备用，有时间的话一些需要的视频可以自己制作简单字幕。谢谢这位网友，以下都是转自他的博客：
liujiren150.blog.163.com/blog/static/96846062008101874621298/

---------------------------------------------------------------------------------------------------

SRT字幕完全手册

2008-11-18

本想从网上找一篇详细介绍srt字幕的文章，但可能是这种格式的字幕太简单了，根本找不到
于是干脆自己写一篇，给不认识和刚接触的人扫扫盲


下载一个srt格式的字幕后，使用记事本或者写字板打开，将看到如下内容
1
00:00:05,255 --> 00:00:06,654
...something they had never seen,

2
00:00:06,756 --> 00:00:08,087
which liberated a yellow,

3
00:00:08,191 --> 00:00:09,988
very pungent and acrid vapor.

4
00:00:10,093 --> 00:00:11,651
The actions of the hardline military regime

5
00:00:11,761 --> 00:00:14,389
are the cause of increasing
international concern.

一个字幕段，包括：字幕头、时间轴、字幕内容、空行

1                                                             -----→ 字幕头
00:00:05,255 --> 00:00:06,654              -----→ 时间轴
...something they had never seen,        -----→ 字幕内容
                                                              -----→ 空行

以上每部分都是以回车（换行）隔开的，下面我将对这四部分进行详述

1.字幕头
在字幕显示中不起任何作用，只是起着标记和标识的作用，方便分配翻译行数用
字幕头的值可以随意，1和100都一样，并不会影响字幕的显示
但是字幕头也是字幕段的一部分，所以不能没有或者删去，否则播放电影时，将出现错误

2.时间轴
时间轴表示播放此字幕内容的开始时间点和结束时间点，其差值即字幕出现的时间长度
时间轴包含3部分：开始时间点、语句符号、结束时间点
以此时间轴为例：00:00:05,255 --> 00:00:06,654
00:00:05,255                                                  -----→ 开始时间点
00:00:06,654                                                  -----→ 结束时间点
 -->                                                                 -----→ 语句符号
00:00:06,654-00:00:05,255＝00:00:01,399   -----→ 字幕时长＝结束时间点-开始时间点
开始时间点：字幕开始出现的时间点
结束时间点：字幕结束的时间点
字幕时长：  字幕出现的时间长度
语句符号：  相当于四则运算中的“加减乘除”

开始（或结束）时间点各分号的意思：时:分:秒,毫秒（1000毫秒＝1秒）
例如00:00:05,255表示00时00分05秒255毫秒

3.字幕内容
显示在屏幕上的字幕，即直接和观众见面的文字、符号等
字幕内容可以有几行

4.空行
srt字幕的基本格式，可以理解为此字幕段终结的标志（前提是此空行后连接着下一字幕段的字幕头）
此空行后，将接着下一字幕段，如果没有此空行，加载字幕时将出乱

 

 

如果计算机上已经安装了暴风影音播放器或者kmplayer，抑或已安装了vobsub
而且字幕的文件名和电影名相同（如dmd-cloverfield.chs.srt和dmd-cloverfield.avi）
则播放电影时将自动加载此字幕，成功加载的字幕会在屏幕右下角（任务栏上）出现一个绿色的小箭头

下面我将谈论如果字幕段某部分出错时，将出现的问题和情况（此处默认其它部分没错），以及解决的办法
1.没有字幕头

00:00:05,255 --> 00:00:06,654
...something they had never seen,

00:00:06,756 --> 00:00:08,087
which liberated a yellow,

00:00:08,191 --> 00:00:09,988
very pungent and acrid vapor.

显示时，将在00:00:05,255 --> 00:00:06,654时间段内（第一条残缺字幕段的时间轴）出现
...something they had never seen,

00:00:06,756 --> 00:00:08,087
which liberated a yellow,

00:00:08,191 --> 00:00:09,988
very pungent and acrid vapor.

然后就没有字幕了，直到下一个完整字幕段为止
即接下来本该有字幕的时间00:00:06,756 --> 00:00:08,087和00:00:08,191 --> 00:00:09,988没有字幕
解决办法：手动加入字幕头，字幕头的值随便写
1
00:00:05,255 --> 00:00:06,654
...something they had never seen,

200
00:00:06,756 --> 00:00:08,087
which liberated a yellow,

10000
00:00:08,191 --> 00:00:09,988
very pungent and acrid vapor.

2.时间轴错误
时间轴的各个数字和符号的模式都是硬性规定的，绝对不容许改变
比如把半角逗号（,）变成全角（，）；半角分号（:）变成全角（：）
错误示例：00:00:05，255       00：00：05,255

时间轴的错误将是致命的
如果出现上述错误将不能正常加载字幕，所有的字幕都不会显示
有的暴风版本在此错误下打开电影，会弹出一个对话框，告诉你哪一行出错（error in line xxx)
这时你可以把字幕文件用word打开（右键），或者直接全部复制粘贴字幕里的所有内容到word（注意不能自己加行）
再用word里的编辑->查找->定位->行找到错误的地方，回到字幕文件中将其改成标准格式，保存后重新打开电影

3.没有空行
1
00:00:05,255 --> 00:00:06,654
...something they had never seen,
2
00:00:06,756 --> 00:00:08,087
which liberated a yellow,
3
00:00:08,191 --> 00:00:09,988
very pungent and acrid vapor.

此处注意字幕段1和2之间少了一个空行，显示时将会在字幕段1的时间内出现
...something they had never seen,
2
00:00:06,756 --> 00:00:08,087
which liberated a yellow,
3
00:00:08,191 --> 00:00:09,988
very pungent and acrid vapor.

而后字幕段2和3的时间内将没有字幕，因为字幕段1的结束标志是空行
但它没有碰到空行，则把后面的整个字幕段也当成是字幕段1的字幕内容了
解决办法：手动回车加空行

 

 

srt字幕以其简单，体积小，易查看，易掌握等优点，深得人们的喜爱
但便利的代价就是不能玩花样，不能做复杂的显示，比如移动、变换等
最常用的有“斜体”等，但是本人经实验发现，其它稍微复杂一点格式的字幕代码（如ssa字幕）在srt字幕中也能使用

斜体  在需要斜体的字幕内容两端分别插入和
例如: We'll just do a short one real quick.
显示：We'll just do a short one real quick.
也可以使用ssa代码的{i1}，放在需要斜体的内容前
例如：{i1}We'll just do a short one real quick.

颜色  在需要上色的两端插入<font color=#73e200>和</font>，，其中#73e200为颜色代码
也可以使用ssa代码，例如{c&HFF0000&}，放在需要上色的内容前（注：ssa代码可以使用Popsub的特效功能生成）
例如：{c&HFF0000&}Come on!
但是一般情况下都没必要为字幕着色，因为srt字幕的简单才是根本！

位置  因为在srt中我没发现能够改变显示位置的代码，所以使用的都是ssa里面的代码，用法同上
{\a1}左对齐
{\a2}居中
{\a3}右对齐
{\a5}左上对齐
{\a6}上居中
{\a7}右上对齐
{\a9}左中心
{\a10}中心           
{\a11}右中心  
还可以使用{pos(75,25)}之类的代码定位，但个人觉得上面的代码已经足够了，没必要再使用软件生成，把简单的srt弄复杂
srt字幕默认的位置是居中，即{\a2}，如果电影中有对白，且电影本身又有硬字幕（嵌在电影里的字幕）
如果想同时显示，则可以自己为硬字幕添加时间轴，并在字幕内容前插入位置代码，如{\a6}
则电影上方将会显示你添加的字幕，不会和已有的对白字幕相叠加（时间轴重合也没关系）
例如：
172
00:11:53,458 --> 00:11:55,221
Something tells me you got it covered.

1
00:11:54,458 --> 00:11:56,221
{\a6}Sunday morning
其中1字幕段是我复制172字幕段的时间轴添加的，然后修改了一下秒和字幕头（毫秒这么小，没改），再加了个空行
这两段字幕在时间上有重合，如果1字幕段没有{\a6}的代码，则会同时显示在屏幕下方
而以上字幕的显示是Something tells me you got it covered.显示在默认的下方中心
Sunday morning显示在屏幕的上方中心

 

字幕软件介绍
Popsub
进行翻译、制作ssa字幕（包括特效等）、用纯文本制作srt字幕、制作纯时间轴等
用Popsub软件进行翻译的优点是快捷键，即翻译时可以用快捷键进行电影的后退、前进和暂停
如果只是要加一两条时间轴，可以复制粘贴原有的时间轴，修改时间参数即可
我喜欢复制上一条时间轴，把秒修改到相应的时间，简单易用
但如果要添加的时间轴很多，可以用Popsub制作纯时间轴，然后粘贴进字幕，再把翻译加进去

火鸟
进行字幕合并、分割、增减时间等操作，具体可自己下载软件来查看，里面有详细教程
注意使用最新的火鸟版本，因为老版本的bug很让人头疼

SubtitleWorkshop
功能非常强大，几乎什么都能做，我用的也只是皮毛，大家慢慢摸索吧

subresync
时间轴调节，个人感觉不好用
一般时间轴如果有些微的偏离，直接在写字板里修改相应的时间参数即可
当然这需要多练才能熟悉，谁叫我不想用软件呢

srt字幕制作助手
普通的功能，如微调时间、翻译、合并字幕等都没问题，但个人觉得软件使用不方便，很生硬

subrip
将sub转换成srt格式的工具

SubOcr
将sub转换成srt的另一款工具，后来有人还据此制作了IdxSubOcr
但我都没用过，用过的可以说说怎样

